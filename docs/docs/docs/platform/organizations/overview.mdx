---
title: Overview
description: Core organizational entities and multi-tenant management
sidebar_position: 1
---

# Organizations

Organizations represent the fundamental tenant structure in Openlane, serving as the primary container for all compliance activities, resources, and data within the platform. The `Organization` object represents a central entity within the system, encapsulating various resources, settings, and members.

## What Are Organizations?

Organizations are the top-level entities in Openlane's multi-tenant architecture. They provide complete data isolation, resource management, and compliance program coordination for distinct business entities, companies, or organizational units.

## Resource Ownership

Organizations are the holders / owners of resources created within the tenancy model, but a confirmed user in active state must be associated with the Organization ownership role. A user will always be the owner of their Personal Organization, they will very commonly be members of Organizations other than their Personal, and they will likely be the owner of other Organizations or Child Organizations depending on desired system configuration(s).

## Membership

Users will hold "memberships" to objects such as Groups, Organizations, Projects, etc. They will also hold ownership of resources which is the assignment of a role-level within openlane's authorization constructs, as the "parent" of resources within openlane are always the tenant(s) of the associated tree.

## Personal Organizations

After being created, a user can be granted access to a tenant, which allows them to perform operations and access resources within that tenant and all its sub-tenants. Users can be granted access to one or more tenants, as needed, and can be managed through the user and permissions APIs exposed / provided by openlane.

## Compliance Significance

Organizations are essential for:
- **Multi-Tenant Isolation**: Ensuring complete data separation between different organizations
- **Compliance Program Management**: Coordinating comprehensive compliance programs across all organizational activities
- **Resource Allocation**: Managing compliance resources, budgets, and personnel assignments
- **Audit Scope Definition**: Defining clear audit boundaries and organizational responsibilities
- **Regulatory Compliance**: Managing organization-specific regulatory requirements and jurisdictions

## Organization Types

### Enterprise Organizations
- **Scope**: Large enterprises with complex compliance requirements
- **Characteristics**: Multiple subsidiaries, diverse regulatory requirements, extensive audit programs
- **Resources**: Dedicated compliance teams, significant compliance budgets, comprehensive control frameworks
- **Use Cases**: Public companies, highly regulated industries, multinational corporations

### Small-Medium Organizations
- **Scope**: Growing organizations with emerging compliance needs
- **Characteristics**: Single entity focus, specific compliance requirements, structured compliance programs
- **Resources**: Limited compliance staff, focused compliance initiatives, targeted control implementations
- **Use Cases**: Private companies, service providers, technology startups

### Subsidiary Organizations
- **Scope**: Child organizations within larger enterprise structures
- **Characteristics**: Inherited compliance requirements, shared resources, coordinated programs
- **Resources**: Shared compliance resources, aligned compliance programs, centralized oversight
- **Use Cases**: Regional offices, business units, acquired companies

### Service Organizations
- **Scope**: Organizations providing services to other organizations
- **Characteristics**: Service-specific compliance requirements, customer-facing compliance programs
- **Resources**: Service-oriented compliance teams, customer compliance support, trust center management
- **Use Cases**: Cloud service providers, managed service providers, outsourcing organizations

## Properties

### Core Information
- **ID**: Unique identifier for the organization
- **Name**: Official organization name
- **Display Name**: User-friendly organization name
- **Description**: Organization description and purpose
- **Website**: Organization website URL

### Business Information
- **Industry**: Industry classification
- **Size**: Organization size (employees, revenue)
- **Headquarters**: Primary business location
- **Jurisdictions**: Legal jurisdictions where organization operates
- **Business Type**: Type of business entity (corporation, LLC, partnership, etc.)

### Configuration
- **Settings**: Organization-specific configuration settings
- **Features**: Enabled features and capabilities
- **Subscription**: Subscription plan and billing information
- **Limits**: Resource limits and usage quotas
- **Preferences**: Organization preferences and defaults

### Compliance Context
- **Compliance Frameworks**: Applicable compliance frameworks and standards
- **Regulatory Requirements**: Specific regulatory requirements
- **Audit Schedule**: Planned audit activities and schedules
- **Risk Profile**: Organization risk profile and appetite
- **Compliance Maturity**: Current compliance maturity level

## GraphQL Operations

### Query Organizations
```graphql
query GetOrganizations($first: Int, $where: OrganizationWhereInput) {
  organizations(first: $first, where: $where) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    totalCount
    edges {
      node {
        id
        name
        displayName
        description
        personalOrg
        avatarRemoteURL
        dedicatedDb
        createdAt
        updatedAt
        setting {
          id
          domains
          billingContact
          billingEmail
          billingPhone
          billingAddress
          taxIdentifier
        }
      }
    }
  }
}
```

### Create Organization
```graphql
mutation CreateOrganization($input: CreateOrganizationInput!) {
  createOrganization(input: $input) {
    organization {
      id
      name
      displayName
      description
      personalOrg
      avatarRemoteURL
      createdAt
      setting {
        id
        domains
        billingContact
        billingEmail
      }
    }
  }
}
```

### Update Organization
```graphql
mutation UpdateOrganization($id: ID!, $input: UpdateOrganizationInput!) {
  updateOrganization(id: $id, input: $input) {
    organization {
      id
      name
      displayName
      description
      personalOrg
      avatarRemoteURL
      updatedAt
    }
  }
}
```

### Get Organization with Members
```graphql
query GetOrganizationWithMembers($id: ID!) {
  organization(id: $id) {
    id
    name
    displayName
    description
    members {
      edges {
        node {
          id
          role
          user {
            id
            firstName
            lastName
            email
          }
        }
      }
    }
    groups {
      edges {
        node {
          id
          name
          displayID
          description
        }
      }
    }
  }
}
```

## API Access

Organizations are managed exclusively through GraphQL operations. There are no REST endpoints for organization CRUD operations. All organization management, member operations, and configuration must be performed using the GraphQL API as shown in the examples above.

## Permissions at an Organization Level

Permissions within an organization are managed through roles and specific permissions:

* Roles: Roles such as `owner`, `admin`, `member` define the level of access a user has within an organization.
* Permissions: Specific permissions like `can_view`, `can_edit`, `audit_log_viewer`, and `can_invite_members` are assigned to roles to control access to various resources and actions within the organization.

### Organization Membership

Organization membership involves associating users with an organization and assigning them roles. Membership details include:

* Roles: Roles assigned to members determine their access level and permissions within the organization.
* Membership Management: Members can be added, updated, or removed using mutations like `createOrgMembership`, `updateOrgMembership`, and `deleteOrgMembership`.

### Update Organization roles

Example:

```graphql
mutation UpdateUserRoleInOrg($updateOrgMemberId: ID!, $input: UpdateOrgMembershipInput!) {
  updateOrgMembership(id: $updateOrgMemberId, input: $input) {
    orgMembership {
      id
      role
      userID
      organizationID
    }
  }
}
```

## Organization Invitations

Organization invitations allow users to be invited to join an organization. Invitations typically involve sending an invite to a user via email, who can then accept with the uniquely generated code sent to them in an email and become a member of the organization.

## Examples

Adding a Member to an Existing Organization:

```graphql
mutation {
  createOrgMembership(
    input: {
      organizationID: "org1",
      userID: "user3",
      role: MEMBER
    }
  ) {
    orgMembership {
      id
      userID
      role
    }
  }
}
```

Updating Organization settings (update avatar):

```graphql
mutation UpdateOrganization($updateOrganizationId: ID!, $input: UpdateOrganizationInput!, $avatarFile: Upload) {
  updateOrganization(id: $updateOrganizationId, input: $input, avatarFile: $avatarFile) {
    organization {
      id
    }
  }
}
```

## Organization Management

### Multi-Tenant Architecture

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="javascript" label="JavaScript">

```javascript
// Multi-tenant organization management
class OrganizationManager {
  async createOrganization(orgData) {
    // Create organization record
    const organization = await this.createOrgRecord(orgData);

    // Initialize organization resources
    await this.initializeOrgResources(organization.id);

    // Set up default compliance framework
    await this.setupDefaultCompliance(organization.id, orgData.compliance_frameworks);

    // Create initial admin user
    await this.createOrgAdmin(organization.id, orgData.admin_user);

    // Configure organization settings
    await this.configureOrgSettings(organization.id, orgData.settings);

    return organization;
  }

  async provisionOrgResources(orgId, resourceSpecs) {
    const resources = {
      database: await this.provisionTenantDatabase(orgId),
      storage: await this.provisionTenantStorage(orgId),
      compute: await this.provisionTenantCompute(orgId, resourceSpecs.compute),
      network: await this.provisionTenantNetwork(orgId)
    };

    await this.updateOrgResources(orgId, resources);
    return resources;
  }

  async migrateOrganization(orgId, targetEnvironment) {
    const migrationPlan = await this.createMigrationPlan(orgId, targetEnvironment);

    // Execute migration phases
    for (const phase of migrationPlan.phases) {
      await this.executeMigrationPhase(orgId, phase);
    }

    // Validate migration
    await this.validateMigration(orgId, targetEnvironment);

    return migrationPlan;
  }
}
```

</TabItem>
<TabItem value="golang" label="Go">

```go
package main

import (
    "context"
    "fmt"

    "github.com/theopenlane/core/pkg/openlaneclient"
)

// OrganizationManager handles multi-tenant organization management
type OrganizationManager struct {
    client *openlaneclient.OpenlaneClient
}

// CreateOrganization creates a new organization with complete setup
func (om *OrganizationManager) CreateOrganization(ctx context.Context, orgData *CreateOrgData) (*Organization, error) {
    // Create organization record
    organization, err := om.createOrgRecord(ctx, orgData)
    if err != nil {
        return nil, fmt.Errorf("failed to create org record: %w", err)
    }

    // Initialize organization resources
    if err := om.initializeOrgResources(ctx, organization.ID); err != nil {
        return nil, fmt.Errorf("failed to initialize org resources: %w", err)
    }

    // Set up default compliance framework
    if err := om.setupDefaultCompliance(ctx, organization.ID, orgData.ComplianceFrameworks); err != nil {
        return nil, fmt.Errorf("failed to setup compliance: %w", err)
    }

    // Create initial admin user
    if err := om.createOrgAdmin(ctx, organization.ID, orgData.AdminUser); err != nil {
        return nil, fmt.Errorf("failed to create admin user: %w", err)
    }

    // Configure organization settings
    if err := om.configureOrgSettings(ctx, organization.ID, orgData.Settings); err != nil {
        return nil, fmt.Errorf("failed to configure settings: %w", err)
    }

    return organization, nil
}

// ProvisionOrgResources provisions infrastructure resources for an organization
func (om *OrganizationManager) ProvisionOrgResources(ctx context.Context, orgID string, resourceSpecs *ResourceSpecs) (*OrgResources, error) {
    resources := &OrgResources{}

    // Provision database
    database, err := om.provisionTenantDatabase(ctx, orgID)
    if err != nil {
        return nil, fmt.Errorf("failed to provision database: %w", err)
    }
    resources.Database = database

    // Provision storage
    storage, err := om.provisionTenantStorage(ctx, orgID)
    if err != nil {
        return nil, fmt.Errorf("failed to provision storage: %w", err)
    }
    resources.Storage = storage

    // Provision compute
    compute, err := om.provisionTenantCompute(ctx, orgID, resourceSpecs.Compute)
    if err != nil {
        return nil, fmt.Errorf("failed to provision compute: %w", err)
    }
    resources.Compute = compute

    // Provision network
    network, err := om.provisionTenantNetwork(ctx, orgID)
    if err != nil {
        return nil, fmt.Errorf("failed to provision network: %w", err)
    }
    resources.Network = network

    if err := om.updateOrgResources(ctx, orgID, resources); err != nil {
        return nil, fmt.Errorf("failed to update org resources: %w", err)
    }

    return resources, nil
}

// MigrateOrganization migrates an organization to a target environment
func (om *OrganizationManager) MigrateOrganization(ctx context.Context, orgID, targetEnvironment string) (*MigrationPlan, error) {
    migrationPlan, err := om.createMigrationPlan(ctx, orgID, targetEnvironment)
    if err != nil {
        return nil, fmt.Errorf("failed to create migration plan: %w", err)
    }

    // Execute migration phases
    for _, phase := range migrationPlan.Phases {
        if err := om.executeMigrationPhase(ctx, orgID, phase); err != nil {
            return nil, fmt.Errorf("failed to execute migration phase %s: %w", phase.Name, err)
        }
    }

    // Validate migration
    if err := om.validateMigration(ctx, orgID, targetEnvironment); err != nil {
        return nil, fmt.Errorf("failed to validate migration: %w", err)
    }

    return migrationPlan, nil
}
```

</TabItem>
</Tabs>

### Compliance Program Setup

<Tabs>
<TabItem value="golang" label="Go">

```go
package main

import (
    "context"
    "fmt"
    "strings"

    "github.com/theopenlane/core/pkg/openlaneclient"
    "github.com/theopenlane/core/internal/ent/generated"
)

// SetupComplianceProgram creates and configures compliance programs for an organization
func SetupComplianceProgram(ctx context.Context, client *openlaneclient.OpenlaneClient, orgID string, frameworks []string) ([]*generated.Program, error) {
    // Get organization details
    org, err := client.GetOrganizationByID(ctx, orgID)
    if err != nil {
        return nil, fmt.Errorf("failed to get organization: %w", err)
    }

    var programs []*generated.Program

    for _, framework := range frameworks {
        // Create compliance program
        programInput := openlaneclient.CreateProgramInput{
            Name:        fmt.Sprintf("%s Compliance Program", strings.ToUpper(framework)),
            Description: openlaneclient.Ptr(fmt.Sprintf("Comprehensive %s compliance program", framework)),
            FrameworkName: openlaneclient.Ptr(framework),
            ProgramType: openlaneclient.ProgramTypeFRAMEWORK,
            Status:      openlaneclient.ProgramStatusACTIVE,
        }

        program, err := client.CreateProgram(ctx, programInput)
        if err != nil {
            return nil, fmt.Errorf("failed to create program for %s: %w", framework, err)
        }

        // Import standard controls
        standardControls, err := getStandardControls(ctx, client, framework)
        if err != nil {
            return nil, fmt.Errorf("failed to get standard controls for %s: %w", framework, err)
        }

        if err := importControlsToProgram(ctx, client, program.ID, standardControls); err != nil {
            return nil, fmt.Errorf("failed to import controls to program: %w", err)
        }

        // Create initial risk assessment
        riskInput := openlaneclient.CreateRiskInput{
            Name:     fmt.Sprintf("%s Framework Risk Assessment", strings.ToUpper(framework)),
            Details:  openlaneclient.Ptr(fmt.Sprintf("Initial risk assessment for %s compliance program", framework)),
            Category: openlaneclient.Ptr("COMPLIANCE"),
            RiskType: openlaneclient.Ptr("OPERATIONAL"),
            Status:   openlaneclient.RiskStatusOPEN,
            ProgramIDs: []string{program.ID},
        }

        _, err = client.CreateRisk(ctx, riskInput)
        if err != nil {
            return nil, fmt.Errorf("failed to create risk assessment: %w", err)
        }

        // Set up audit schedule
        if err := setupAuditSchedule(ctx, client, program.ID, framework); err != nil {
            return nil, fmt.Errorf("failed to setup audit schedule: %w", err)
        }

        programs = append(programs, program)
    }

    return programs, nil
}

// getStandardControls retrieves standard controls for a compliance framework
func getStandardControls(ctx context.Context, client *openlaneclient.OpenlaneClient, framework string) ([]*generated.Control, error) {
    // Query controls by standard/framework
    where := openlaneclient.ControlWhereInput{
        // Filter by standard name or framework
    }

    controls, err := client.GetControls(ctx, &where)
    if err != nil {
        return nil, fmt.Errorf("failed to get controls: %w", err)
    }

    return controls.Controls.Edges, nil
}

// importControlsToProgram associates standard controls with a program
func importControlsToProgram(ctx context.Context, client *openlaneclient.OpenlaneClient, programID string, controls []*generated.Control) error {
    for _, control := range controls {
        // Update control to associate with program
        updateInput := openlaneclient.UpdateControlInput{
            ProgramIDs: []string{programID},
        }

        _, err := client.UpdateControl(ctx, control.ID, updateInput)
        if err != nil {
            return fmt.Errorf("failed to update control %s: %w", control.ID, err)
        }
    }

    return nil
}

// setupAuditSchedule creates audit schedule for a compliance program
func setupAuditSchedule(ctx context.Context, client *openlaneclient.OpenlaneClient, programID, framework string) error {
    // Create audit tasks based on framework requirements
    auditTasks := []openlaneclient.CreateTaskInput{
        {
            Title:       fmt.Sprintf("Q1 %s Audit Preparation", strings.ToUpper(framework)),
            Description: openlaneclient.Ptr("Prepare documentation and evidence for quarterly audit"),
            Status:      openlaneclient.TaskStatusTODO,
            Category:    openlaneclient.Ptr("AUDIT"),
            ProgramIDs:  []string{programID},
        },
        {
            Title:       fmt.Sprintf("Annual %s Compliance Review", strings.ToUpper(framework)),
            Description: openlaneclient.Ptr("Comprehensive annual compliance program review"),
            Status:      openlaneclient.TaskStatusTODO,
            Category:    openlaneclient.Ptr("COMPLIANCE"),
            ProgramIDs:  []string{programID},
        },
    }

    for _, taskInput := range auditTasks {
        _, err := client.CreateTask(ctx, taskInput)
        if err != nil {
            return fmt.Errorf("failed to create audit task: %w", err)
        }
    }

    return nil
}
```

</TabItem>
<TabItem value="javascript" label="JavaScript">

```javascript
// Automated compliance program setup for organizations
const setupComplianceProgram = async (orgId, frameworks) => {
  const org = await getOrganization(orgId);

  for (const framework of frameworks) {
    // Create compliance program
    const program = await createProgram({
      name: `${framework.toUpperCase()} Compliance Program`,
      description: `Comprehensive ${framework} compliance program`,
      framework: framework,
      organization_id: orgId,
      status: 'active'
    });

    // Import standard controls
    const standardControls = await getStandardControls(framework);
    await importControlsToProgram(program.id, standardControls);

    // Create initial risk assessment
    await createRiskAssessment({
      program_id: program.id,
      framework: framework,
      organization_id: orgId
    });

    // Set up audit schedule
    await setupAuditSchedule(program.id, framework);
  }

  return await getOrganizationPrograms(orgId);
};
```

</TabItem>
</Tabs>

### Organization Onboarding

<Tabs>
<TabItem value="golang" label="Go">

```go
package main

import (
    "context"
    "fmt"
    "log"

    "github.com/theopenlane/core/pkg/openlaneclient"
)

// OnboardingStep represents a step in the organization onboarding process
type OnboardingStep struct {
    Name    string
    Execute func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error)
}

// OnboardingData contains all the data needed for organization onboarding
type OnboardingData struct {
    OrgData              *openlaneclient.CreateOrganizationInput
    Settings             *openlaneclient.CreateOrganizationSettingInput
    InitialUsers         []UserInvite
    UserGroups           []GroupConfig
    ComplianceFrameworks []string
    PolicyTemplates      []string
    Integrations         []IntegrationConfig
    ScanConfigurations   []ScanConfig
    TrustCenter          *TrustCenterConfig
}

// OnboardOrganization executes a comprehensive organization onboarding workflow
func OnboardOrganization(ctx context.Context, client *openlaneclient.OpenlaneClient, data *OnboardingData) (*generated.Organization, error) {
    onboardingSteps := []OnboardingStep{
        {
            Name: "Organization Setup",
            Execute: func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error) {
                // Create organization if not already created
                if org == nil {
                    newOrg, err := client.CreateOrganization(ctx, *data.OrgData)
                    if err != nil {
                        return nil, fmt.Errorf("failed to create organization: %w", err)
                    }
                    org = newOrg
                }

                // Configure organization settings
                if data.Settings != nil {
                    data.Settings.OrganizationID = &org.ID
                    _, err := client.CreateOrganizationSetting(ctx, *data.Settings)
                    if err != nil {
                        return nil, fmt.Errorf("failed to configure organization settings: %w", err)
                    }
                }

                return org, nil
            },
        },
        {
            Name: "User Management Setup",
            Execute: func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error) {
                // Create initial users
                for _, userInvite := range data.InitialUsers {
                    inviteInput := openlaneclient.CreateInviteInput{
                        Recipient:      userInvite.Email,
                        Role:           userInvite.Role,
                        OrganizationID: &org.ID,
                    }
                    _, err := client.CreateInvite(ctx, inviteInput)
                    if err != nil {
                        return nil, fmt.Errorf("failed to create user invite for %s: %w", userInvite.Email, err)
                    }
                }

                // Set up user groups
                for _, groupConfig := range data.UserGroups {
                    groupInput := openlaneclient.CreateGroupInput{
                        Name:        groupConfig.Name,
                        Description: &groupConfig.Description,
                    }
                    _, err := client.CreateGroup(ctx, groupInput)
                    if err != nil {
                        return nil, fmt.Errorf("failed to create group %s: %w", groupConfig.Name, err)
                    }
                }

                return org, nil
            },
        },
        {
            Name: "Compliance Framework Configuration",
            Execute: func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error) {
                // Set up compliance programs
                if len(data.ComplianceFrameworks) > 0 {
                    _, err := SetupComplianceProgram(ctx, client, org.ID, data.ComplianceFrameworks)
                    if err != nil {
                        return nil, fmt.Errorf("failed to setup compliance programs: %w", err)
                    }
                }

                // Import policy templates
                for _, templateName := range data.PolicyTemplates {
                    policyInput := openlaneclient.CreateInternalPolicyInput{
                        Name:        fmt.Sprintf("%s Policy Template", templateName),
                        Description: openlaneclient.Ptr(fmt.Sprintf("Policy template for %s", templateName)),
                        PolicyType:  openlaneclient.Ptr("TEMPLATE"),
                    }
                    _, err := client.CreateInternalPolicy(ctx, policyInput)
                    if err != nil {
                        return nil, fmt.Errorf("failed to import policy template %s: %w", templateName, err)
                    }
                }

                return org, nil
            },
        },
        {
            Name: "Integration Setup",
            Execute: func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error) {
                // Configure integrations
                for _, integration := range data.Integrations {
                    integrationInput := openlaneclient.CreateIntegrationInput{
                        Name:        integration.Name,
                        Description: &integration.Description,
                        Kind:        integration.Kind,
                    }
                    _, err := client.CreateIntegration(ctx, integrationInput)
                    if err != nil {
                        return nil, fmt.Errorf("failed to create integration %s: %w", integration.Name, err)
                    }
                }

                // Set up automated scanning (placeholder for scan configuration)
                for _, scanConfig := range data.ScanConfigurations {
                    log.Printf("Setting up scan configuration: %s", scanConfig.Name)
                    // Implementation would depend on specific scan types
                }

                return org, nil
            },
        },
        {
            Name: "Trust Center Setup",
            Execute: func(ctx context.Context, client *openlaneclient.OpenlaneClient, org *generated.Organization, data *OnboardingData) (*generated.Organization, error) {
                if data.TrustCenter != nil {
                    trustCenterInput := openlaneclient.CreateTrustCenterInput{
                        Name:        data.TrustCenter.Name,
                        Description: &data.TrustCenter.Description,
                        Slug:        data.TrustCenter.Slug,
                        // Add other trust center fields as needed
                    }
                    _, err := client.CreateTrustCenter(ctx, trustCenterInput)
                    if err != nil {
                        return nil, fmt.Errorf("failed to create trust center: %w", err)
                    }
                }

                return org, nil
            },
        },
    }

    var result *generated.Organization
    for _, step := range onboardingSteps {
        var err error
        result, err = step.Execute(ctx, client, result, data)
        if err != nil {
            updateOnboardingStatus(ctx, client, data.OrgData.Name, step.Name, "failed", err.Error())
            return nil, fmt.Errorf("onboarding step '%s' failed: %w", step.Name, err)
        }

        // Update onboarding status
        updateOnboardingStatus(ctx, client, result.ID, step.Name, "completed", "")
    }

    return result, nil
}

// Helper types and functions
type UserInvite struct {
    Email string
    Role  openlaneclient.Role
}

type GroupConfig struct {
    Name        string
    Description string
}

type IntegrationConfig struct {
    Name        string
    Description string
    Kind        string
}

type ScanConfig struct {
    Name string
    Type string
}

type TrustCenterConfig struct {
    Name        string
    Description string
    Slug        string
}

// updateOnboardingStatus tracks the progress of onboarding steps
func updateOnboardingStatus(ctx context.Context, client *openlaneclient.OpenlaneClient, orgID, stepName, status, errorMsg string) {
    log.Printf("Onboarding step '%s' for org %s: %s", stepName, orgID, status)
    if errorMsg != "" {
        log.Printf("Error: %s", errorMsg)
    }
    // Implementation would store status in database or external system
}
```

</TabItem>
<TabItem value="javascript" label="JavaScript">

```javascript
// Comprehensive organization onboarding workflow
const onboardOrganization = async (orgData) => {
  const onboardingSteps = [
    {
      name: 'Organization Setup',
      execute: async () => {
        const org = await createOrganization(orgData);
        await configureOrganizationSettings(org.id, orgData.settings);
        return org;
      }
    },
    {
      name: 'User Management Setup',
      execute: async (org) => {
        await createInitialUsers(org.id, orgData.initial_users);
        await setupUserGroups(org.id, orgData.user_groups);
        return org;
      }
    },
    {
      name: 'Compliance Framework Configuration',
      execute: async (org) => {
        await setupComplianceProgram(org.id, orgData.compliance_frameworks);
        await importPolicyTemplates(org.id, orgData.policy_templates);
        return org;
      }
    },
    {
      name: 'Integration Setup',
      execute: async (org) => {
        await configureIntegrations(org.id, orgData.integrations);
        await setupAutomatedScanning(org.id, orgData.scan_configurations);
        return org;
      }
    },
    {
      name: 'Trust Center Setup',
      execute: async (org) => {
        if (orgData.trust_center) {
          await createTrustCenter(org.id, orgData.trust_center);
        }
        return org;
      }
    }
  ];

  let result = null;
  for (const step of onboardingSteps) {
    try {
      result = await step.execute(result);
      await updateOnboardingStatus(orgData.id, step.name, 'completed');
    } catch (error) {
      await updateOnboardingStatus(orgData.id, step.name, 'failed', error.message);
      throw error;
    }
  }

  return result;
};
```

</TabItem>
</Tabs>

## Organization Analytics

### Compliance Metrics Dashboard
```javascript
// Organization compliance metrics and dashboard
const getOrganizationMetrics = async (orgId, timeframe) => {
  const metrics = {
    compliance_score: await calculateComplianceScore(orgId),
    control_implementation: await getControlImplementationStats(orgId),
    risk_management: await getRiskManagementStats(orgId),
    audit_readiness: await getAuditReadinessScore(orgId),
    program_progress: await getProgramProgressStats(orgId),
    resource_utilization: await getResourceUtilizationStats(orgId)
  };

  // Historical trends
  metrics.trends = await getMetricsTrends(orgId, timeframe);

  // Benchmarking
  metrics.benchmarks = await getBenchmarkingData(orgId);

  // Recommendations
  metrics.recommendations = await generateRecommendations(orgId, metrics);

  return metrics;
};
```

### Resource Usage Analytics
```javascript
// Organization resource usage and optimization
const analyzeResourceUsage = async (orgId) => {
  const usage = {
    users: await getUserUsageStats(orgId),
    storage: await getStorageUsageStats(orgId),
    compute: await getComputeUsageStats(orgId),
    api_calls: await getAPIUsageStats(orgId),
    features: await getFeatureUsageStats(orgId)
  };

  // Cost analysis
  usage.costs = await calculateResourceCosts(orgId, usage);

  // Optimization opportunities
  usage.optimization = await identifyOptimizationOpportunities(orgId, usage);

  // Forecasting
  usage.forecast = await forecastResourceNeeds(orgId, usage);

  return usage;
};
```

## Security and Compliance

### Organization Security Model
```javascript
// Organization security model implementation
class OrganizationSecurityModel {
  async enforceDataIsolation(orgId, resourceType, resourceId) {
    const organization = await this.getOrganization(orgId);
    const resource = await this.getResource(resourceType, resourceId);

    // Verify resource belongs to organization
    if (resource.organization_id !== orgId) {
      throw new Error('Resource access denied: Cross-organization access not allowed');
    }

    // Apply additional security controls
    await this.applySecurityControls(resource, organization.security_level);

    return resource;
  }

  async auditOrganizationAccess(orgId, userId, action, resourceType) {
    const auditEvent = {
      organization_id: orgId,
      user_id: userId,
      action: action,
      resource_type: resourceType,
      timestamp: new Date().toISOString(),
      ip_address: await this.getUserIPAddress(userId),
      user_agent: await this.getUserAgent(userId)
    };

    await this.logAuditEvent(auditEvent);

    // Check for suspicious activity
    await this.checkSuspiciousActivity(auditEvent);
  }
}
```

### Compliance Monitoring
```javascript
// Continuous compliance monitoring for organizations
const monitorOrganizationCompliance = async (orgId) => {
  const monitoringRules = await getComplianceMonitoringRules(orgId);

  const monitoringResults = {
    organization_id: orgId,
    monitoring_date: new Date().toISOString(),
    rules_evaluated: [],
    violations_found: [],
    recommendations: []
  };

  for (const rule of monitoringRules) {
    const ruleResult = await evaluateComplianceRule(orgId, rule);
    monitoringResults.rules_evaluated.push(ruleResult);

    if (!ruleResult.passed) {
      monitoringResults.violations_found.push({
        rule: rule,
        violation_details: ruleResult.details,
        severity: ruleResult.severity,
        remediation_steps: ruleResult.remediation
      });
    }
  }

  // Generate recommendations
  monitoringResults.recommendations = await generateComplianceRecommendations(
    orgId,
    monitoringResults.violations_found
  );

  // Alert on critical violations
  const criticalViolations = monitoringResults.violations_found.filter(
    v => v.severity === 'critical'
  );

  if (criticalViolations.length > 0) {
    await alertComplianceTeam(orgId, criticalViolations);
  }

  return monitoringResults;
};
```

## Integration and Automation

### Third-Party Integration Management
```javascript
// Manage third-party integrations for organizations
const manageOrganizationIntegrations = async (orgId, integrations) => {
  const integrationResults = [];

  for (const integration of integrations) {
    const result = await setupIntegration(orgId, integration);
    integrationResults.push(result);

    // Configure integration security
    await configureIntegrationSecurity(result.id, integration.security_settings);

    // Set up monitoring
    await setupIntegrationMonitoring(result.id, integration.monitoring_config);

    // Test integration
    await testIntegration(result.id);
  }

  return integrationResults;
};
```

### Automated Compliance Workflows
```javascript
// Automated compliance workflows for organizations
const setupAutomatedWorkflows = async (orgId, workflowConfigs) => {
  const workflows = [];

  for (const config of workflowConfigs) {
    const workflow = await createWorkflow({
      organization_id: orgId,
      name: config.name,
      trigger: config.trigger,
      actions: config.actions,
      schedule: config.schedule
    });

    workflows.push(workflow);

    // Activate workflow
    await activateWorkflow(workflow.id);
  }

  return workflows;
};
```

## Relationships

Organizations serve as the root entity and relate to all other Openlane objects:

### Direct Relationships
- **Users**: Members of the organization
- **Groups**: User groups within the organization
- **Organization Settings**: Configuration and preferences
- **Subscriptions**: Billing and subscription information

### Owned Resources
- **Programs**: Compliance programs managed by the organization
- **Controls**: Security controls implemented by the organization
- **Evidence**: Evidence collected by the organization
- **Risks**: Risks managed by the organization
- **Policies**: Policies created by the organization
- **Tasks**: Tasks assigned within the organization
- **Files**: Documents and files owned by the organization
- **Entities**: Business entities within the organization

## Best Practices

### Organization Setup
1. **Clear Naming**: Use clear, consistent naming conventions
2. **Proper Classification**: Classify organizations by type and size
3. **Complete Configuration**: Ensure all settings are properly configured
4. **Security Hardening**: Implement appropriate security measures from the start

### Multi-Tenant Management
1. **Data Isolation**: Maintain strict data isolation between organizations
2. **Resource Allocation**: Properly allocate resources based on organization needs
3. **Performance Monitoring**: Monitor performance across all organizations
4. **Scalability Planning**: Plan for organizational growth and scaling

### Compliance Management
1. **Framework Selection**: Choose appropriate compliance frameworks
2. **Regular Assessments**: Conduct regular compliance assessments
3. **Continuous Monitoring**: Implement continuous compliance monitoring
4. **Documentation**: Maintain comprehensive compliance documentation

### Operational Excellence
1. **Automation**: Automate routine organizational management tasks
2. **Monitoring**: Implement comprehensive monitoring and alerting
3. **Backup and Recovery**: Maintain robust backup and recovery procedures
4. **Change Management**: Implement proper change management procedures

Organizations provide the foundational structure for all compliance activities and resource management within Openlane's multi-tenant platform.
